function ModalRemote(t){function o(){this.show(),this.displayLoading()}function e(t){302!=t.status&&(this.setTitle(t.status+": "+t.statusText),this.setContent("<pre>"+t.responseText+"</pre>"),this.addFooterButton("Batal","button","btn btn-secondary",function(t,o){this.hide()}))}function a(t){void 0!==t.forceReload&&t.forceReload&&("true"==t.forceReload?$.pjax.reload({container:"#crud-datatable-pjax"}):$.pjax.reload({container:t.forceReload})),void 0!==t.forceClose&&t.forceClose?this.hide():(this.setSize("large"),void 0!==t.title&&this.setTitle(t.title),void 0!==t.content&&this.setContent(t.content),void 0!==t.footer&&this.setFooter(t.footer),void 0!==$(this.content).find("form")[0]&&this.setupFormSubmit($(this.content).find("form")[0],$(this.footer).find('[type="submit"]')[0]))}this.defaults={okLabel:"OK",executeLabel:"Execute",cancelLabel:"Batal",loadingTitle:"Loading..."},this.modal=$(t),this.dialog=$(t).find(".modal-dialog"),this.header=$(t).find(".modal-header"),this.content=$(t).find(".modal-body"),this.footer=$(t).find(".modal-footer"),this.loadingContent='<div class="progress"><div class="progress-bar progress-bar-striped bg-primary progress-bar-animated" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div></div>',this.show=function(){this.clear(),$(this.modal).modal("show")},this.hide=function(){$(this.modal).modal("hide")},this.toggle=function(){$(this.modal).modal("toggle")},this.clear=function(){$(this.modal).find(".modal-title").html(""),$(this.content).html(""),$(this.footer).html(""),colElm=document.createElement("div"),colElm.setAttribute("class","col-12 text-right"),$(this.footer).append(colElm)},this.setSize=function(t){$(this.dialog).removeClass("modal-lg"),$(this.dialog).removeClass("modal-sm"),"large"==t?$(this.dialog).addClass("modal-lg"):"small"==t?$(this.dialog).addClass("modal-sm"):"normal"!==t&&console.warn("Undefined size "+t)},this.setHeader=function(t){$(this.header).html(t)},this.setContent=function(t){$(this.content).html(t)},this.setFooter=function(t){$(this.footer).html(t)},this.setTitle=function(t){$(this.header).find(".modal-title").html(t)},this.hidenCloseButton=function(){$(this.header).find("button.close").hide()},this.showCloseButton=function(){$(this.header).find("button.close").show()},this.displayLoading=function(){this.setContent(this.loadingContent),this.setTitle(this.defaults.loadingTitle)},this.addFooterButton=function(t,o,e,a){buttonElm=document.createElement("button"),buttonElm.setAttribute("type",null===o?"button":o),buttonElm.setAttribute("class",null===e?"btn btn-primary":e),buttonElm.innerHTML=t;var i=this;$(this.footer).append(buttonElm),null!==a&&$(buttonElm).click(function(t){a.call(i,this,t)})},this.doRemote=function(t,i,s,n=!0){var r=this;$.ajax({url:t,method:i,data:s,async:!1,beforeSend:function(){n&&o.call(r)},error:function(t){n&&e.call(r,t)},success:function(t){a.call(r,t)},contentType:!1,cache:!1,processData:!1})},this.setupFormSubmit=function(t,o){if(void 0===o)console.warn("Modal has form but does not have a submit button");else{var e=this;$(o).click(function(o){var a;a=window.FormData?new FormData($(t)[0]):$(t).serializeArray(),e.doRemote($(t).attr("action"),$(t).hasAttr("method")?$(t).attr("method"):"GET",a)})}},this.confirmModal=function(t,o,e,a,i,s,n,r){this.show(),this.setSize(i),void 0!==t&&this.setTitle(t),this.setContent('<form id="ModalRemoteConfirmForm">'+o);var d=this;this.addFooterButton(void 0===e?this.defaults.okLabel:e,"submit","btn btn-danger",function(t){var o;window.FormData?(o=new FormData($("#ModalRemoteConfirmForm")[0]),void 0!==r&&r&&o.append("pks",r.join())):(o=$("#ModalRemoteConfirmForm"),void 0!==r&&r&&(o.pks=r),o=o.serializeArray()),d.doRemote(s,n,o)}),this.addFooterButton(void 0===a?this.defaults.cancelLabel:a,"button","btn btn-secondary",function(t){this.hide()})},this.open=function(t,o){var e=!0;$(t).hasAttr("data-modal-show")&&(e="0"!=$(t).attr("data-modal-show")),$(t).hasAttr("data-confirm-title")||$(t).hasAttr("data-confirm-message")?this.confirmModal($(t).attr("data-confirm-title"),$(t).attr("data-confirm-message"),$(t).attr("data-confirm-ok"),$(t).attr("data-confirm-cancel"),$(t).hasAttr("data-modal-size")?$(t).attr("data-modal-size"):"normal",$(t).hasAttr("href")?$(t).attr("href"):$(t).attr("data-url"),$(t).hasAttr("data-request-method")?$(t).attr("data-request-method"):"GET",o,e):this.doRemote($(t).hasAttr("href")?$(t).attr("href"):$(t).attr("data-url"),$(t).hasAttr("data-request-method")?$(t).attr("data-request-method"):"GET",o,e)}}(function(t){t.fn.hasAttr=function(t){return void 0!==this.attr(t)}})(jQuery);